from pprint import pprint
import struct

input2 = [0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31 , 0x31]
shu = [0x00, 0x10, 0x13, 0x04, 0xBF, 0xBF, 0xB9, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x13, 0x04, 0xBF, 0xBF, 0xB9, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
c = [0x2f] * 32

index = [0 for i in range(32)]
for i in range(32):
	if input2[i] == c[i]:
		index[i] = 0xff
	else: index[i] = 0x00
tmp = ''
s = struct.unpack('i'*8, ''.join([chr(i) for i in input2]))
print "s:", [hex(i) for i in s] 
for i in range(8):
	tmp += struct.pack("<i", s[i] >> 4)

print "tmp:", repr(tmp)
t = [0 for i in range(32)]

for i in range(32):
	t[i] = ord(tmp[i]) & 0x2f
print "t1:", t
for i in range(32):
	t[i] += index[i]
print "t2:", t
for i in range(32):
	t[i] &= 0xff
print "t3:", t
for i in range(32):
	if t[i] >= 32:
		t[i] %= 32
	t[i] = shu[t[i]]
print "t4:", [hex(i) for i in t] 
for i in range(32):
	t[i] &= 0xff
for i in range(32):
	t[i] = input2[i]+t[i]
	t[i] &= 0xff
print "t5:", t

for i in range(0,32,4):
	a1 = t[i]*0x40 +t[i+1]
	a2 = t[i+2]*0x40 +t[i+3]
	#print hex(a1), hex(a2)
	a = a1*0x1000+a2
	#print hex(a)
	t[i] = a & 0xff
	t[i+1] = (a>>8) & 0xff
	t[i+2] = (a>>16) & 0xff
	t[i+3] = (a>>24) & 0xff
for i in t:
	print chr(i),
